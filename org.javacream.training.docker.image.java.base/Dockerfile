FROM openjdk:8-alpine
ENV JAVA_MAX_MEMORY 256M
ENV JAVA_INITIAL_MEMORY 256M
ENV JAVA_NEW_MEMORY 128M
ENV JAVA_JOLOKIA_PORT 7777
ENV JAVA_OPTS ""
ENV JAVA_LIB_DIR /java/lib
EXPOSE ${JAVA_JOLOKIA_PORT}
ADD jolokia-jvm-1.3.7-agent.jar ./jolokia-agent.jar
RUN mkdir -p ${JAVA_LIB_DIR}
ENTRYPOINT java ${JAVA_OPTS} -javaagent:jolokia-agent.jar=port=${JAVA_JOLOKIA_PORT},host=0.0.0.0 -Xmx${JAVA_MAX_MEMORY} -Xmn${JAVA_NEW_MEMORY} -Xms${JAVA_INITIAL_MEMORY} -jar ${JAVA_LIB_DIR}/app.jar 
